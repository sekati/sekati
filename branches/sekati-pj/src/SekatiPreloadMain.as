/** * SekatiPreloadMain * @version 1.0.0 * @author pj ahlberg * Copyright (C) 2009  pj ahlberg. All Rights Reserved. */package {	/**	 * SekatiPreloadMain	 */	import flash.display.Sprite;	import flash.events.Event;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import caurina.transitions.Tweener;	import sekati.display.APILoader;	public class SekatiPreloadMain extends APILoader {				protected var _loadBar:Sprite;		protected var _loadGutter:Sprite;		public function SekatiPreloadMain() {			super( );					}				override protected function addedToStage(e:Event):void		{			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;						this.removeEventListener( Event.ADDED_TO_STAGE, addedToStage);			drawShapes();		}				protected function drawShapes():void		{			_loadGutter = new Sprite();			_loadGutter.graphics.beginFill(0x666666, 1);			_loadGutter.graphics.moveTo(0, 0);			_loadGutter.graphics.lineTo(150, 0);			_loadGutter.graphics.lineTo(150, 10);			_loadGutter.graphics.lineTo(0, 10);			_loadGutter.graphics.lineTo(0, 0);			_loadGutter.graphics.endFill();						_loadBar = new Sprite();			_loadBar.graphics.beginFill(0x000000, 1);			_loadBar.graphics.moveTo(0, 0);			_loadBar.graphics.lineTo(150, 0);			_loadBar.graphics.lineTo(150, 10);			_loadBar.graphics.lineTo(0, 10);			_loadBar.graphics.lineTo(0, 0);			_loadBar.graphics.endFill();			_loadBar.scaleX = 0;						addChild(_loadGutter);			addChild(_loadBar);									_loadBar.x = _loadBar.y = _loadGutter.x = _loadGutter.y = 10;					}				override protected function animateProgress(perc:Number):void{			trace("PERC:"+perc);			_loadBar.scaleX = perc;		}				override protected function animateComplete():void		{						Tweener.addTween(_loadGutter, {alpha:0, time:2, transition:"easeoutsine"});			Tweener.addTween(_loadBar, {alpha:0, time:2, transition:"easeoutsine", onComplete:cleanup});					}				protected function cleanup():void		{			removeChild(_loadGutter);			removeChild(_loadBar);			initLoadedSwf();		}	}}